<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>
   Player Card
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <style>
   body {
      font-family: 'Arial', sans-serif;
      background-color: rgb(0, 0, 0);
    }
    #playerModal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.8);
      color: rgb(0, 0, 0);
      padding: 1rem;
      border-radius: 0.5rem;
      z-index: 1000;
    }
    #field {
      border: 1px dashed #000000;
      width: 200px;
      height: 300px;
      margin: 1rem auto;
      position: relative;
    }
    .player-draggable {
      cursor: grab;
    }
    .text-custom {
      color: #000000;
    }
  </style>
 </head>
 <body class="bg-gray-100">
  <div class="bg-white shadow-md rounded-lg p-4" id="field" style="height: 14%; width: 17%; border: #000000; background-image: url(../photos/images-removebg-preview.png);background-size: cover;">
   <div class="card-bg text-white w-12 p-0.5 bg-[url('https://placehold.co/150x225')] bg-cover bg-center player-draggable" draggable="true">
    <div class="flex justify-between items-center">
     <div class="text-center text-custom">
      <div class="text-[6px] font-bold">
       90
      </div>
      <div class="text-[5px] font-semibold">
       ST
      </div>
     </div>
     <img alt="Small circular image of the Portugal flag" class="w-2 h-2 rounded-full border border-white" height="16" src="https://storage.googleapis.com/a1aa/image/4rZ3R3zKzwZMNNVlfIWgwOSKhTAH7f65jGwmGj1PcZilPeqnA.jpg" width="16"/>
    </div>
    <div class="mt-0.5 flex justify-center">
     <img alt="Portrait of Cristiano Ronaldo" class="rounded-full w-4 h-4 border border-gray-100" height="32" src="https://storage.googleapis.com/a1aa/image/i5NeO6WRrVS5LCHftxPCqL3yfcYhe854hKDj2UbWBkjTexreE.jpg" width="32"/>
    </div>
    <div class="mt-0.5 text-center text-[5px] font-bold leading-tight text-custom">
     CR7
    </div>
    <div class="mt-0.5 flex justify-center">
     <div class="text-custom text-[5px]">
      Cristiano Ronaldo
     </div>
    </div>
   </div>
  </div>
  <div class="flex flex-col items-center" id="playerModal">
   <div class="mb-2">
    <label class="block text-sm" for="playerName">
     Name:
    </label>
    <input class="text-black p-1 rounded" id="playerName" type="text"/>
   </div>
   <div class="mb-2">
    <label class="block text-sm" for="playerNumber">
     Number:
    </label>
    <input class="text-black p-1 rounded" id="playerNumber" type="number"/>
   </div>
   <div class="flex space-x-2">
    <button class="bg-blue-500 text-white px-3 py-1 rounded" onclick="savePlayerDetails()">
     Save
    </button>
    <button class="bg-red-500 text-white px-3 py-1 rounded" onclick="closeModal()">
     Close
    </button>
   </div>
  </div>
  <script>
   const draggables = document.querySelectorAll('.player-draggable');
    const field = document.getElementById('field');
    const modal = document.getElementById('playerModal');
    let activeButton;

    // Open modal to edit player details
    function openModal(button) {
      activeButton = button;
      modal.style.display = 'flex';
    }

    // Close modal
    function closeModal() {
      modal.style.display = 'none';
    }

    // Save player details
    function savePlayerDetails() {
      const name = document.getElementById('playerName').value;
      const number = document.getElementById('playerNumber').value;

      if (name && number) {
        const playerCard = activeButton.parentElement;
        playerCard.innerHTML = `<div class="text-[5px]">${name} (#${number})</div>`;
        playerCard.appendChild(activeButton);
      }
      closeModal();
    }

    // Drag-and-drop events
    draggables.forEach(draggable => {
      draggable.addEventListener('dragstart', () => {
        draggable.classList.add('dragging');
      });

      draggable.addEventListener('dragend', () => {
        draggable.classList.remove('dragging');
      });
    });

    field.addEventListener('dragover', e => {
      e.preventDefault();
      const afterElement = getDragAfterElement(field, e.clientY);
      const draggable = document.querySelector('.dragging');
      if (afterElement == null) {
        field.appendChild(draggable);
      } else {
        field.insertBefore(draggable, afterElement);
      }
    });

    function getDragAfterElement(container, y) {
      const draggableElements = [...container.querySelectorAll('.player-draggable:not(.dragging)')];

      return draggableElements.reduce((closest, child) => {
        const box = child.getBoundingClientRect();
        const offset = y - box.top - box.height / 2;
        if (offset < 0 && offset > closest.offset) {
          return { offset: offset, element: child };
        } else {
          return closest;
        }
      }, { offset: Number.NEGATIVE_INFINITY }).element;
    }
  </script>
 </body>
</html>